/*!
 * bootCommerce v0.0.1 (https://github.com/leedorian/bootCommerce/)
 * Copyright 2015-2015 
 * Licensed under MIT (https://github.com/leedorian/bootCommerce/blob/master/LICENSE.md)
 */
var bootCommerce=bootCommerce||{};bootCommerce.CONSTANTS={BP_XS:"screen and (max-width:479px)",BP_S:"screen and (max-width:599px)",BP_M:"screen and (max-width:770px)",BP_L:"screen and (max-width:979px)",BP_XL:"screen and (max-width:1199px)"},bootCommerce.Utils={template:function(a,b){"use strict";var c=$(a).html(),d=Handlebars.compile(c),e={};return b&&"object"==typeof b&&(e=b),d(e)}},bootCommerce.Basket={init:function(){"use strict";new bootCommerce.Basket.orderItem({container:".basketOrderTable .basketOrderItem",containerInput:".basketOrderTable .basketQuantityOperation"}),bootCommerce.Basket.checkPromotionalCode(),new bootCommerce.Basket.basketOperationButton({saveBasketAjax:!0,emptyBasketAjax:!0,checkOutAjax:!0})}},bootCommerce.Basket.orderItem=function(a){"use strict";this.defaults={container:"",containerInput:""},this.settings=$.extend({},this.defaults,a),this.inputValue=0,this.currentIdIndex="",this.setIdName(),this.calculate(),this.removeBasketItem(".basketProductRemove"),this.removeBasketItem(".basketMoveWishList")},bootCommerce.Basket.orderItem.prototype.setIdName=function(){"use strict";var a=this;$(this.settings.containerInput).each(function(b){$(a.settings.containerInput).eq(b).attr("id","basketQty"+(b+1))}),$(this.settings.container).each(function(b){$(a.settings.container).eq(b).attr("id","basketOrderItem"+(b+1))})},bootCommerce.Basket.orderItem.prototype.calculate=function(){"use strict";var a=this;$(this.settings.containerInput).find(".reduceBtn").on("click.calculate",function(){var b=$(this).parent().find("input");a.inputValue=parseInt(b.val(),10),a.inputValue>1&&(a.inputValue--,b.val(a.inputValue))}),$(this.settings.containerInput).find(".addBtn").on("click.calculate",function(){var b=$(this).parent().find("input");a.inputValue=parseInt(b.val(),10),a.inputValue++,b.val(a.inputValue)}),$(this.settings.containerInput).find("input").on("keyup.calculate",function(){a.inputValue=$(this).val();var b=a.inputValue.match(/^[1-9]+\d*$/);return b||""===a.inputValue?void 0:(console.log("Please key in a number"),!1)})},bootCommerce.Basket.orderItem.prototype.removeBasketItem=function(a){"use strict";var b=this;$(a).each(function(){$(this).on("click.removeBasketItem",function(){b.currentIdIndex=$(this).parent().parent().attr("id").replace(/[^0-9]/gi,""),$("#basketOrderItem"+b.currentIdIndex).remove()})})},bootCommerce.Basket.checkPromotionalCode=function(){"use strict";$(".promotionalCode button").on("click.checkPromotionalCode",function(){})},bootCommerce.Basket.basketOperationButton=function(a){"use strict";this.defaults={saveBasketAjax:!1},this.settings=$.extend({},this.defaults,a),this.saveBasketAjax=!0,this.emptyBasketAjax=!0,this.checkOutAjax=!0,this.saveBasket(),this.EmptyBasket(),this.checkOut()},bootCommerce.Basket.basketOperationButton.prototype.saveBasket=function(){"use strict";$(".basketSaveBtn").on("click.saveBasket",function(){$(".basketOrderTable tbody tr").empty()})},bootCommerce.Basket.basketOperationButton.prototype.EmptyBasket=function(){"use strict";$(".basketEmptyBtn").on("click.EmptyBasket",function(){})},bootCommerce.Basket.basketOperationButton.prototype.checkOut=function(){"use strict";$(".basketCheckOutBtn").on("click.EmptyBasket",function(){})},bootCommerce.Carousel=function(a){"use strict";var b=this;this.defaults={containerId:"",controlDirectionClassName:".carouselControl",carouselIndicatorsClassName:".carouselIndicators",autoPlay:!0,intervalTime:5e3,pauseMethod:"hover",wrapPlay:!0,keyboardEvent:!0},this.settings=$.extend({},this.defaults,a),this.settings.autoPlay&&$(this.settings.containerId).carousel({interval:this.settings.intervalTime,pause:this.settings.pauseMetheod,wrap:this.settings.wrapPlay,keyboard:this.settings.keyboardEvent}),$(this.settings.controlDirectionClassName).eq(0).on("click",function(){$(b.settings.containerId).carousel("prev")}),$(this.settings.controlDirectionClassName).eq(1).on("click",function(){$(b.settings.containerId).carousel("next")}),$(this.settings.carouselIndicatorsClassName).find("li").each(function(a){$(this).on("click.Carousel",function(){$(b.settings.containerId).carousel(a)})})},bootCommerce.FilterChecklist=function(){"use strict";$(".productFilterCheckbox h4 button").on("click.FilterChecklist",function(){$(".productCheckboxList input:checkbox").each(function(){$(this).attr("checked",!1)}),$(".productCheckboxList input:text").each(function(){$(this).val("")})})},bootCommerce.FilterRemoveable={init:function(){"use strict";new bootCommerce.FilterRemoveable.FilterRemoveablePanel({removeContainer:".productRemovableList",allRemoveClickContainer:".productFilterRemovableTitle"}),bootCommerce.FilterRemoveable.CascadingPane()}},bootCommerce.FilterRemoveable.FilterRemoveablePanel=function(a){"use strict";this.defaults={removeContainer:"",allRemoveClickContainer:""},this.settings=$.extend({},this.defaults,a),this.removeFn()},bootCommerce.FilterRemoveable.FilterRemoveablePanel.prototype.removeFn=function(){"use strict";var a=this,b=$(this.settings.removeContainer).find("button");b.each(function(a){b.eq(a).on("click.removeFn",function(){$(this).parent().remove()})}),$(this.settings.allRemoveClickContainer).find("button").on("click.removeFn",function(){$(a.settings.removeContainer).find("li").remove()})},bootCommerce.FilterRemoveable.CascadingPane=function(){"use strict";$("#collapseOne").collapse({toggle:!0}),$(".panel-title").find("a").on("click.CascadingPane",function(){$(".panel-collapse").collapse("hide"),$(this).is(".fa-caret-down")?($(this).removeClass("fa-caret-down").addClass("fa-caret-right"),$($(this).attr("href")).collapse("toggle")):($(this).removeClass("fa-caret-right").addClass("fa-caret-down"),$($(this).attr("href")).collapse("show"))})},bootCommerce.ImageViewer=function(){"use strict";$(".imageViewer").on("click.ImageViewer",".imageViewerThumb img",function(a){a.preventDefault(),$(this).closest(".imageViewer").find(".imageViewerBooth img").attr("src",$(this).data("img-booth"))}).on("mousemove.ImageViewer",".imageViewerBooth",function(a){var b=$(this).offset(),c={},d=$(this).find(".imageViewerLens"),e=$(this).find(".imageViewerOverlay img"),f=$(this).width(),g=$(this).height(),h=d.width(),i=d.height();c.left=a.pageX-b.left<=h/2?0:a.pageX-b.left+h/2>=f?f-h:a.pageX-b.left-h/2,c.top=a.pageY-b.top<=i/2?0:a.pageY-b.top+i/2>=g?g-i:a.pageY-b.top-i/2,d.css(c),e.css({marginTop:2*-c.top,marginLeft:2*-c.left})}).on("mouseenter.ImageViewer",".imageViewerBooth",function(){$(this).find(".imageViewerOverlay").show()}).on("mouseleave.ImageViewer",".imageViewerBooth",function(){$(this).find(".imageViewerOverlay").hide()})},bootCommerce.MiniBasket=function(){"use strict";var a={miniBasketBtn:$(".siteMinBasketBox"),miniBasketPopup:$(".siteMinBasketPopup")};a.miniBasketBtn.on("click.MiniBasket",function(){a.miniBasketPopup.toggle("linear")}),$(".siteMinBasketPopup .close").on("click.MiniBasket",function(){"block"===$(".mobileHeader").css("display")?($(".siteMinBasket").hide(),$(".mobileMinBasket").removeClass("mobileActive"),$(".siteMinBasketPopup").css("display","block")):a.miniBasketPopup.hide()})},bootCommerce.Navigation=function(){"use strict";var a=$(".mobileHeader li");a.click(function(){$("[responsive-mobile-control=true]").hide(),$(this).hasClass("mobileActive")?$(this).removeClass("mobileActive"):($(".mobileActive").removeClass("mobileActive"),$(this).addClass("mobileActive"),$("."+$(this).attr("site-target")).show())})},bootCommerce.ProductInfosTab=function(){"use strict";$(".productInfosTabTitle").on("click.ProductInfosTab","a",function(a){a.preventDefault()}).on("focus.ProductInfosTab","a",function(){$(this).tab("show")}).on("show.bs.tab","a",function(a){$(this).closest(".productInfosTab").find("dt.current").removeClass("current").end().find($(a.target).attr("href")).prev("dt").addClass("current")}).on("keypress.ProductInfosTab","li",function(a){var b,c;switch(a.keyCode){case 37:b=$(this).prev(),b.size()>0&&b.find("a").focus().tab("show");break;case 39:c=$(this).next(),c.size()>0&&c.find("a").focus().tab("show")}}).find("a:first").tab("show"),$(".productInfosTabContent").on("click.ProductInfosTab","dt",function(){$(this).closest(".productInfosTab").find(".productInfosTabTitle a[href=#"+$(this).next("dd").prop("id")+"]").tab("show")})},Handlebars.registerHelper("searchTermBold",function(a,b){"use strict";return b.fn(this).replace(new RegExp("(>[^<]*)("+a+")([^>]*<)","gi"),"$1<strong>$2</strong>$3")}),bootCommerce.Search=function(a){"use strict";this.defaults={autoSuggestion:!0,suggestionCon:"",keywordInput:"",searchForm:"",container:"",development:!0},this.fakeData={header:"Suggest keywords",term:"pipe",keywords:["Pipe","pipe plugs","pipe end","pipe caps","pipe end plugs","pipe cap"],Category:[{title:"flexible pipe caps",url:"http://uk.essentracomponents.com/shop/en-GB/essentracomponentsuk/flexible-pipe-caps-18052-44",name:"Caps &amp; Plugs &gt; Pipe &amp; Flange Protection Caps &gt; Pipe Caps &gt; Flexible Pipe Caps"},{title:"flexible pipe caps",url:"http://uk.essentracomponents.com/shop/en-GB/essentracomponentsuk/flexible-pipe-caps-18086-44",name:"Caps &amp; Plugs &gt; Push Fit Caps &gt; Pipe Caps &gt; Flexible Pipe Caps"}],Brand:[]},this.settings=$.extend({},this.defaults,a),this.inputVal="",this.suggestDivShow=!1,this.doDynamicSuggest=!0,this.oldInputVal="",this.autoSuggestTimer=-1,this.autoSuggestKeystrokeDelay=250;var b=this;$(this.settings.keywordInput).on("keypress.search",function(a){13===a.keyCode&&a.preventDefault()}),$(this.settings.keywordInput).on("keyup.search",function(a){if(b.inputVal=$(this).val(),b.inputVal.length>=2)switch(a.keyCode){case 38:b.highlight("up");break;case 40:b.highlight("down");break;case 27:b.clearResult();break;case 13:b.doSearchSumbit();break;default:b.oldInputVal!==b.inputVal&&(b.getResult(b.inputVal),b.oldInputVal=b.inputVal)}else b.clearResult(),b.oldInputVal=b.inputVal})},bootCommerce.Search.prototype.getResult=function(){"use strict";var a=this;-1!==this.autoSuggestTimer&&clearTimeout(this.autoSuggestTimer),this.autoSuggestTimer=setTimeout(function(){a.settings.development?a.showResult(a.fakeData):console.log("do ajax"),a.autoSuggestTimer=-1},a.autoSuggestKeystrokeDelay)},bootCommerce.Search.prototype.toggleSuggestDiv=function(a){"use strict";a?$(this.settings.suggestionCon).show():$(this.settings.suggestionCon).hide()},bootCommerce.Search.prototype.showResult=function(a){"use strict";var b=bootCommerce.Utils.template("#tempBcSearchAutoSugTerm",a),c=bootCommerce.Utils.template("#tempBcSearchAutoSugCat",a);$(this.settings.suggestionCon).find(".autoSuggestKeywords").html(b),$(this.settings.suggestionCon).find(".autoSuggestCategory").html(c),this.toggleSuggestDiv(!0)},bootCommerce.Search.prototype.highlight=function(a){"use strict";var b=$(this.settings.suggestionCon).find("li"),c=b.filter(".active"),d=b.index(c);"up"===a?(console.log(this.inputVal),0>=d&&(d=b.length),d--):(d===b.length-1&&(d=-1),d++),c.removeClass("active"),c=b.eq(d).addClass("active"),$(this.settings.keywordInput).val(0===c.closest(".autoSuggestCategory").size()?c.text():this.oldInputVal)},bootCommerce.Search.prototype.clearResult=function(){"use strict";$(this.settings.suggestionCon).find(".autoSuggestKeywords").html(""),$(this.settings.suggestionCon).find(".autoSuggestCategory").html(""),$(this.settings.suggestionCon).hide()},bootCommerce.Search.prototype.doSearchSumbit=function(){"use strict";var a=$(this.settings.suggestionCon).find(".active a");0!==a.length&&""!==a.attr("href")?window.location.href=a.attr("href"):$(this.settings.container).find("form")[0].submit()},bootCommerce.StorLocator=function(){"use strict";$(".findStoreBtn").on("click.StorLocator",function(){}),$(".cascadingPanelCollapse").each(function(){$(this).on("click.StorLocator",function(){var a=$(this).find("span");$(".collapse").collapse("hide"),a.is(".fa-caret-down")?(a.removeClass("fa-caret-down").addClass("fa-caret-right"),$($(this).attr("href")).collapse("toggle")):($($(this).attr("href")).collapse("show"),a.removeClass("fa-caret-right").addClass("fa-caret-down"))})})},bootCommerce.signInRegister=function(){"use strict";$(".FormLayoutTransTrigger").on("change",function(){var a=$(this).parents("form"),b=$(this).val();a.find(".form-group input[type!=checkbox]").each("withoutLabelForm"===b?function(){$(this).attr("placeHolder",$(this).siblings("label").html())}:function(){$(this).attr("placeHolder","")}),a.attr("class",b)})};